# 智能报告系统 - 产品规格说明书

**版本**: v0.1  
**创建时间**: 2026-02-28  
**状态**: 初始版本

---

## 目录

1. [产品概述](#1-产品概述)
2. [已实现功能](#2-已实现功能)
3. [待支持特性清单](#3-待支持特性清单)
4. [技术规格待办](#4-技术规格待办)
5. [修订历史](#5-修订历史)

---

## 1. 产品概述

### 1.1 产品定位

智能报告系统是一个基于大语言模型（LLM）的报告生成平台，支持用户通过对话交互的方式，快速生成专业的分析报告。

### 1.2 目标用户

- 网络设备运维人员
- 数据中心运营团队
- 需要定期生成专业报告的分析师

### 1.3 核心价值

| 价值维度 | 说明 |
|---------|------|
| 效率提升 | 简单报告 <30 秒，复杂报告 <10 分钟 |
| 质量保证 | 每条结论有数据支撑，可追溯到原始数据 |
| 交互体验 | 对话式交互，支持局部修改和重新生成 |
| 灵活输出 | 支持 Word、PDF 等多种格式 |

---

## 2. 已实现功能

### 2.1 报告模板管理

- 创建、编辑、删除报告模板
- 定义报告内容参数（支持静态列表、数据库查询、API 调用）
- 定义报告大纲（目录结构 + 内容节）
- 支持动态章节（遍历生成多节）

### 2.2 报告实例生成

- 对话式交互生成报告
- 模板匹配与参数收集
- LLM 生成报告内容（图表 + 见解）
- 支持局部重新生成
- 用户编辑与预览

### 2.3 报告文档管理

- 生成 Word/PDF 文档
- 文档下载与分享
- 文档版本管理

### 2.4 定时任务（基础版）

- 基于 cron 表达式的定时调度
- 自动更新参数并生成新实例
- 任务执行记录查询
- 任务的增删查改、暂停/恢复

---

## 3. 待支持特性清单

### 3.1 报告实例模块

| 特性 ID | 特性名称 | 描述 | 优先级 | 当前设计 | 备注 |
|--------|---------|------|--------|---------|------|
| **RI-001** | 报告审核流程 | 支持多级审核流程，审核通过后方可生成文档 | Medium | 当前设计：无需审核，用户确认后直接生成 | 后续支持 |
| **RI-002** | 实例版本控制 | 支持实例的多版本管理，可查看历史版本 | Low | 当前设计：每次修改覆盖原实例 | 暂不实现 |
| **RI-003** | 实例协作编辑 | 支持多人协作编辑同一实例 | Low | 当前设计：单人编辑 | 需要冲突解决机制 |
| **RI-004** | 实例批注评论 | 支持对实例内容添加批注和评论 | Medium | 当前设计：不支持 | 审核场景需要 |
| **RI-005** | 实例对比 | 支持两个实例版本的内容对比 | Low | 当前设计：不支持 | 可视化差异对比 |

### 3.2 定时任务模块

| 特性 ID | 特性名称 | 描述 | 优先级 | 当前设计 | 备注 |
|--------|---------|------|--------|---------|------|
| **TF-001** | 定时任务状态机 | 为报告实例新增 `template_ready` 状态，专门用于定时任务源实例 | Low | 当前设计：任何状态的实例都可作为源实例 | 暂不实现 |
| **TF-002** | 定时任务并发控制 | 支持配置定时任务的并发执行策略（串行/并行/跳过） | Medium | 当前设计：不考虑并发，任务时间到即执行 | 暂不实现 |
| **TF-003** | 失败自动重试 | 任务执行失败后自动重试，支持配置重试次数和间隔 | Medium | 当前设计：失败不重试，记录错误日志 | 暂不实现 |
| **TF-004** | 执行记录自动清理 | 定期清理超过保留期的执行记录（如保留 1 年） | Low | 当前设计：永久保存，手动清理 | 暂不实现 |
| **TF-005** | 多参数动态更新 | 支持更新除时间外的其他参数（如设备列表轮询） | Low | 当前设计：仅更新时间参数 | 暂不实现 |
| **TF-006** | 执行结果通知 | 任务执行完成后通过邮件/短信/企业微信/钉钉通知用户 | Medium | 当前设计：不发送通知 | 暂不实现 |
| **TF-007** | 自动生成文档 | 定时任务执行完成后自动生成报告文档 | Medium | 当前设计：手动触发生成文档 | 暂不实现 |
| **TF-008** | Cron 表达式验证 | 提供 Cron 表达式语法验证和预览下次执行时间 | Low | 基础功能，后续补充 | 暂不实现 |

### 3.2 报告模板模块

| 特性 ID | 特性名称 | 描述 | 优先级 | 备注 |
|--------|---------|------|--------|------|
| **TM-001** | 模板版本管理 | 支持模板版本控制，可回滚到历史版本 | Medium | 当前设计：仅支持覆盖更新 |
| **TM-002** | 模板克隆 | 一键克隆现有模板，快速创建相似模板 | Low | 基础功能，后续补充 |
| **TM-003** | 模板导入导出 | 支持 JSON/YAML 格式的模板导入导出 | Low | 便于模板共享和迁移 |
| **TM-004** | 模板权限控制 | 支持模板的私有/共享/公开权限设置 | Medium | 多租户场景需要 |

### 3.3 报告实例模块

| 特性 ID | 特性名称 | 描述 | 优先级 | 备注 |
|--------|---------|------|--------|------|
| **RI-001** | 实例版本控制 | 支持实例的多版本管理，可查看历史版本 | Low | 当前设计：每次修改覆盖原实例 |
| **RI-002** | 实例协作编辑 | 支持多人协作编辑同一实例 | Low | 需要冲突解决机制 |
| **RI-003** | 实例批注评论 | 支持对实例内容添加批注和评论 | Medium | 审核场景需要 |
| **RI-005** | 实例对比 | 支持两个实例版本的内容对比 | Low | 可视化差异对比 |

### 3.3 报告模板模块

### 3.4 报告文档模块

### 3.5 对话交互模块

### 3.6 系统架构模块

| 特性 ID | 特性名称 | 描述 | 优先级 | 备注 |
|--------|---------|------|--------|------|
| **SA-001** | 多租户支持 | 支持多租户隔离，数据权限控制 | Medium | 商业化需要 |
| **SA-002** | 审计日志 | 记录所有关键操作的审计日志 | Medium | 合规需要 |
| **SA-003** | 性能监控 | 监控系统性能指标（响应时间、QPS 等） | Medium | 运维需要 |
| **SA-004** | 分布式部署 | 支持分布式部署，水平扩展 | Low | 大规模场景需要 |

---

## 4. 技术规格待办

### 4.1 性能指标

| 指标 | 目标值 | 当前状态 | 备注 |
|------|--------|---------|------|
| 简单报告生成时间 | <30 秒 | 待实现 | 设备数<5，仅需数据库查询 |
| 复杂报告生成时间 | <10 分钟 | 待实现 | 设备数>20，需跨系统关联分析 |
| API 响应时间 (P95) | <500ms | 待实现 | 非 LLM 调用接口 |
| 系统可用性 | 99.9% | 待实现 | 年度可用性指标 |

### 4.2 可靠性要求

| 要求 | 描述 | 优先级 | 备注 |
|------|------|--------|------|
| 数据持久化 | 所有报告数据必须持久化存储 | High | 防止数据丢失 |
| 任务容错 | 定时任务执行失败不影响其他任务 | Medium | 任务隔离 |
| 备份恢复 | 支持数据备份和灾难恢复 | Medium | 运维需要 |

### 4.3 安全性要求

| 要求 | 描述 | 优先级 | 备注 |
|------|------|--------|------|
| 身份认证 | 支持用户登录和身份验证 | High | 基础安全 |
| 权限控制 | 基于角色的访问控制 (RBAC) | High | 数据权限 |
| 数据加密 | 敏感数据加密存储 | Medium | 合规需要 |
| API 限流 | 防止 API 滥用 | Medium | 防 DDoS |

---

## 5. 修订历史

| 版本 | 日期 | 作者 | 变更说明 |
|------|------|------|----------|
| v0.1 | 2026-02-28 | - | 初始版本，记录定时任务模块待支持特性清单 |
| v0.2 | 2026-02-28 | - | 新增报告审核流程到待支持特性清单（RI-001），原 RI-001~RI-004 编号调整为 RI-002~RI-005 |
